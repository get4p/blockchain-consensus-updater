// Enhance contract upgrade mechanism
// Bugfix: incorrect reward calculation
